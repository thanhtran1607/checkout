<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=width-device invitial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!------ Include the above in your HEAD tag ---------->
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <style>
        .error{
            color: crimson;
            font-style: italic;
        }
    </style>

    </head>


<body>
    <div class="container">
        <br>  <p class="text-center">Đăng kí tài khoản mua vé <a href="http://bootstrap-ecommerce.com/"> Bootstrap-ecommerce.com</a></p>
        <hr>


        <div class="card bg-light">
            <article class="card-body mx-auto" style="max-width: 500px;">
                <div class="inlineBlock">
                    <h4 class="card-title mt-3 text-center" style="float: left;">Đăng kí</h4>
                    <h4 class="card-title mt-3 text-center" style="float: right; font-size: small; padding: 10px 0;">Đăng nhập</h4>
                </div>
                
                <form id="formregister">
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                    </div>
                    <input id="username" name="username" class="form-control" placeholder="Tên đăng nhập" type="text">
                    <br>
                </div> <!-- form-group// -->
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
                    </div>
                    <input id="email" name="email" class="form-control" placeholder="Email" type="email">
                </div> <!-- form-group// -->
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-phone"></i> </span>
                    </div>
                    <input id="numberphone" name="numberphone" class="form-control" placeholder="Số điện thoại" type="text">
                </div> <!-- form-group// -->
            
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                    </div>
                    <input id="password" name="password" class="form-control" placeholder="Mật khẩu" type="password">
                </div> <!-- form-group// -->
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                    </div>
                    <input id="passwordconfirm" name="passwordconfirm" class="form-control" placeholder="Nhập lại mật khẩu" type="password">
                </div> <!-- form-group// -->                                      
                <div class="form-group">
                    <button type="submit" id="btnRegister" class="btn btn-primary btn-block">Đăng kí</button>
                </div> <!-- form-group// -->      
                <p class="text-center">Have an account? <a href="">Log In</a> </p>                                                                 
            </form>
            </article>
            </div> <!-- card.// -->

            </div> 
            <!--container end.//-->
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.js"></script>
    <script type="text/javascript">
       $(document).ready(function(){
            $(function (){              
                var fRegister = $('#formregister');
                // $.validator.addMethod("noSpace", function(value, elemnet){
                //     return value == '' || value.trim().length !=0
                // }, "vui lòng không nhập khoảng trắng");
                // jQuery.validator.addMethod("laxEmail", function(value, element) {
                // // allow any non-whitespace characters as the host part
                // return this.optional( element ) || /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@(?:\S{1,63})$/.test( value );
                // }, 'Please enter a valid email address.');

                if (fRegister.length){

                    $.validator.addMethod("noSpace", function(value, elemnet){
                    return value == '' || value.trim().length !=0
                    }, "vui lòng không nhập khoảng trắng");

                    fRegister.validate({
                        rules: {
                            username: {
                                required: true,
                                noSpace: true
                            },
                            email: {
                                required: true,
                                email: true
                                
                            },
                            numberphone: {
                                required: true,
                                digits: true
                            },
                            password: {
                                required: true,
                                rangelength: [6, 10]
                            },
                            passwordconfirm: {
                                required: true,
                                equalTo: '#password'
                            }
                        },
                        messages: {
                            username: {
                                required: 'vui lòng nhập tên tài khoản'
                            },
                            email: {
                                required: 'vui lòng nhập email',
                                email: 'email định dạng chưa đúng'
                            },
                            numberphone: {
                                required: 'vui lòng nhập số điện thoại',
                                digits: 'vui lòng nhập kí tự số'
                            },
                            password: {
                                required: 'vui lòng nhập mật khẩu',
                                rangelength: 'vui lòng nhập mật khẩu từ 6 đến 10 kí tự'
                            },
                            passwordconfirm: {
                                required: 'vui lòng nhập lại mật khẩu',
                                equalTo: 'mật khẩu không khớp'
                            }
                        },
                        
                        // submitHandler: function (form){
                        //         //alert('success')
                        //         $(form).submit()
                        //}
                
                    })
                   
                }

                var dataCustomer = {}
                $('#btnRegister').click(function(event){
                    event.preventDefault();

                    dataCustomer.username= $('#username').val();
                    dataCustomer.email= $('#email').val();
                    dataCustomer.numberphone= $('#numberphone').val();
                    dataCustomer.password= $('#password').val();
                    dataCustomer.passwordconfirm= $('#passwordconfirm').val();
                    var dataCustomerObj = JSON.stringify(dataCustomer);
                    $.ajax({
                        url:'register.js',
                        method: 'post',
                        data: dataCustomerObj,
                        contentType: 'application/json; charset: utf-8',
                        success: function (){
                            // if (!result.hasOwnProperty('error') || result['error'] != 'success'){
                            //     alert('đăng kí không thành công');
                        
                            //     }
                            alert('saved unsuccessfully');
                        }
                        
                    })

                })
            })
        })

        //         var data = $('form#formregister').serialize();
        //         $.ajax({
        //             url: '',
        //             method:'post',
        //             dataType: 'json',
        //             data : {
        //             // username: 'username',
        //             // email:'email',
        //             // numberphone: 'numberphone',
        //             // password:'password',
        //             // passwordconfirm: 'passwordconfirm'
                    
        //         },
        //         success: function(result){
        //             //kiểm tra thông tin lỗi hay không
        //             if (!result.hasOwnProperty('error') || result['error'] != 'success'){
        //                 alert('đăng kí không thành công');
                        
        //             }
        //         }
        //     });
        //     return false;
        // });

    </script>
    
     <!-- <script type="text/javascript">
    //     $(document).ready(function()
    //     {
    //         var submit = $("button[id='btnRegister']");

    //         const checkRequired = (value, title="") => {
    //             if(!value) {
    //                 alert("Vui lòng nhập đúng " + title);
                   
    //             }
    //         }

            
             
    //         // bắt sự kiện click vào nút Login
    //         submit.click(function()
    //         {
    //             var username = $("input[name='username']").val();
    //             var email = $("input[name='email']").val();
    //             var numberphone = $("input[name='numberphone']").val();
    //             var password = $("input[name='password']").val();
    //             var passwordconfirm = $("input[name='passwordconfirm']").val();
                 
    //             // Kiểm tra đã nhập tên tài khoản chưa
    //             checkRequired(username, "tài khoản");
    //             checkRequired(email, "email");

                
    //             if (numberphone == '' || numberphone.length < 10) {
    //                 alert('Vui lòng nhập đúng số điện thoại');
                    
    //             } 
                
                 
    //             // Kiểm tra đã nhập mật khẩu chưa
    //             if (password == '' || password.length < 6) {
    //                 alert('mật khẩu phải có độ dài trên 6 kí tự');
                   
    //             }

    //             if (passwordconfirm == '' || passwordconfirm.length != password.length) {
    //                 alert('Vui lòng nhập lại mật khẩu');
                   
    //             } 
                 

    //             const checkError = (value) => {
    //                 if ($.trim(result.value) != ''){
    //                     html += result.value + '<br/>';
    //                 }
    //             }
    //             // Lấy tất cả dữ liệu trong form login
    //             var data = $('form#formregister').serialize();
    //             // Sử dụng $.ajax()
    //             $.ajax({
    //             type : 'get', //kiểu post
    //             url  : 'register.js', //gửi dữ liệu sang trang
    //             dataType: 'json',
    //             data : {
    //                 username: 'username',
    //                 email:'email',
    //                 numberphone: 'numberphone',
    //                 password:'password',
    //                 passwordconfirm: 'passwordconfirm'
                    
    //             },
    //             success: function(result){
    //                 //kiểm tra thông tin lỗi hay không
    //                 if (!result.hasOwnProperty('error') || result['error'] != 'success'){
    //                     alert('đăng kí không thành công');
                        
    //                 }
                    
    //                 var html='';

    //                 //lấy thông tin lỗi username

    //                 // if ($.trim(result.username) != ''){
    //                 //     html += result.username + '<br/>';
    //                 // }

    //                 checkError(username);
    //                 checkError(email);
    //                 checkError(numberphone);
    //                 checkError(password);
    //                 checkError(passwordconfirm);

    //                 if (html != ''){
    //                     $('#showerror').append(html);
    //                 } else{
    //                     //thành công
    //                     $('#showerror').append('thêm thành công');
    //                 }  
    //             }
    //         });
    //         return false;
    //     });
    //     </script> -->

</body>
</html>
